"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";

const svgPaths = {
    // Home icon paths
    p302f5f0: "M13.6642 5.4774C12.6565 4.81271 11.3437 4.81271 10.336 5.4774L6.55475 7.97151C6.53637 7.98363 6.51759 7.99515 6.49844 8.00604C6.4786 8.01733 6.45892 8.02853 6.4394 8.03963C5.97033 8.30654 5.59317 8.52116 5.19024 8.68862C4.75187 8.87081 4.31038 8.98746 3.69444 9.10822C3.15269 9.21444 2.62649 8.86603 2.51913 8.33001C2.41177 7.794 2.76392 7.27336 3.30567 7.16714C3.85976 7.0585 4.15378 6.97307 4.41567 6.86422C4.69115 6.74973 4.95956 6.59879 5.47294 6.30683L9.22655 3.83091C10.906 2.7231 13.0941 2.7231 14.7736 3.83092L18.5548 6.32503C18.5622 6.32993 18.5695 6.33492 18.5768 6.34001C19.4397 6.94277 20.2868 7.13971 20.5373 7.14896C21.0893 7.16934 21.52 7.62853 21.4994 8.17458C21.4788 8.72064 21.0147 9.14679 20.4628 9.12641C19.7694 9.10081 18.5602 8.74747 17.4346 7.96444L13.6642 5.4774Z",
    p11148400: "M9.00005 14.0742C9.00005 12.9813 9.89548 12.0953 11.0001 12.0953H13.0001C14.1046 12.0953 15.0001 12.9813 15.0001 14.0742V20.0106C15.0001 20.5571 14.5523 21.0001 14.0001 21.0001H10.0001C9.44777 21.0001 9.00005 20.5571 9.00005 20.0106V14.0742ZM13.0001 14.0742H11.0001V19.0212H13.0001V14.0742Z",
    pee5f600: "M5.00005 6.94283C5.55234 6.94283 6.00005 7.3858 6.00005 7.93224V16.053C6.00005 17.6923 7.3432 19.0212 9.00005 19.0212H15.0001C16.6569 19.0212 18.0001 17.6923 18.0001 16.053V7.93225C18.0001 7.38581 18.4478 6.94283 19.0001 6.94283C19.5523 6.94283 20.0001 7.38581 20.0001 7.93225V16.053C20.0001 18.7852 17.7615 21.0001 15.0001 21.0001H9.00005C6.23863 21.0001 4.00005 18.7852 4.00005 16.053V7.93224C4.00005 7.3858 4.44777 6.94283 5.00005 6.94283Z",
    // Learning icon paths
    p2991c3f0: "M8.61743 14.5C9.16972 14.5 9.61743 14.0523 9.61743 13.5C9.61743 12.9477 9.16972 12.5 8.61743 12.5C8.06515 12.5 7.61743 12.9477 7.61743 13.5C7.61743 14.0523 8.06515 14.5 8.61743 14.5Z",
    p2a329280: "M16.3052 13.5C16.3052 14.0523 15.8575 14.5 15.3052 14.5C14.7529 14.5 14.3052 14.0523 14.3052 13.5C14.3052 12.9477 14.7529 12.5 15.3052 12.5C15.8575 12.5 16.3052 12.9477 16.3052 13.5Z",
    p33138980: "M10.1 15.7051C9.93111 15.1793 9.3679 14.89 8.84209 15.0589C8.31628 15.2279 8.02697 15.7911 8.19591 16.3169C8.49454 17.2464 9.66231 18.5525 11.9 18.5525C14.1077 18.5525 15.4312 17.2913 15.864 16.4832C16.1248 15.9963 15.9415 15.3903 15.4547 15.1295C14.9678 14.8687 14.3617 15.052 14.101 15.5389C13.9834 15.7583 13.3033 16.5525 11.9 16.5525C10.5269 16.5525 10.1316 15.8033 10.1 15.7051Z",
    p3b13c200: "M19.1116 2.57383C18.8761 2.07427 18.2802 1.86021 17.7807 2.0957C17.2811 2.3312 17.067 2.92708 17.3025 3.42664C17.5565 3.96539 17.5205 4.31715 17.441 4.5419L17.4377 4.5513C16.1553 3.63288 14.5217 3 12.4997 3C12.4093 3 12.3197 3.00092 12.2308 3.00275C12.1541 3.00092 12.0771 3 12 3C6.75329 3 2.5 7.25329 2.5 12.5C2.5 17.7467 6.75329 22 12 22C17.2467 22 21.5 17.7467 21.5 12.5C21.5 10.8604 21.0846 9.31777 20.3534 7.97166C20.2989 7.86769 20.2421 7.76333 20.1829 7.6588C20.3582 7.67781 20.5739 7.71013 20.8565 7.75701C21.4013 7.84739 21.9163 7.47897 22.0067 6.93413C22.097 6.38929 21.7286 5.87435 21.1838 5.78397C20.6296 5.69206 20.1145 5.61348 19.6073 5.64544C19.4301 5.65661 19.2599 5.68055 19.0927 5.71705C19.1827 5.56037 19.2622 5.391 19.3267 5.20857C19.6007 4.43332 19.5647 3.53509 19.1116 2.57383ZM12 20C16.1042 20 19.4385 16.7033 19.4992 12.6135C18.076 12.6629 16.6972 12.3403 15.5652 11.8643C14.8601 11.5679 14.225 11.2013 13.714 10.8011C13.5691 10.6876 13.4275 10.5662 13.2939 10.4375C12.6671 10.8405 11.847 11.1743 10.8072 11.4102C9.2965 11.753 7.26203 11.9038 4.53888 11.7316C4.51317 11.9842 4.5 12.2406 4.5 12.5C4.5 16.6421 7.85786 20 12 20ZM18.5981 8.93117C17.3628 6.65211 14.9811 5.08505 12.2265 5.00335C9.479 5.07127 7.71174 6.16095 6.58059 7.38706C5.84507 8.18432 5.36861 9.05172 5.08184 9.75958C7.45889 9.88285 9.16277 9.73248 10.3647 9.45977C11.7712 9.14064 12.4193 8.67137 12.6932 8.35062C12.9179 8.08749 13.2626 7.95921 13.6047 8.01147C13.9467 8.06373 14.2375 8.28911 14.3733 8.60733C14.4171 8.70982 14.5768 8.93643 14.9472 9.22654C15.299 9.50213 15.7752 9.78304 16.3404 10.0207C17.2096 10.3861 18.2287 10.6245 19.2503 10.6183C19.2061 10.4403 19.147 10.2392 19.0695 10.0181C18.9496 9.67564 18.7931 9.30719 18.5981 8.93117Z",
    // Chat icon path
    p30eb000: "M12.0099 4.99994C15.8513 4.955 19.1353 8.42809 18.9964 11.9606C18.9567 12.9707 18.8397 13.7247 18.5919 14.379C18.3487 15.021 17.9576 15.6242 17.2891 16.2929C17.0214 16.5607 16.9279 16.9569 17.0476 17.3162L17.6087 19H12.4844C7.8102 19 5.07972 15.7785 5.00048 11.9792C4.93034 8.61619 7.90699 5.04794 12.0099 4.99994ZM20.9942 12.0392C21.1789 7.33825 16.9472 2.94205 11.9865 3.00008C6.72953 3.06158 2.90922 7.58974 3.00164 12.0209C3.10263 16.8628 6.67739 21 12.4844 21H18.9956C19.317 21 19.6187 20.8455 19.8066 20.5847C19.9945 20.3239 20.0456 19.9887 19.944 19.6838L19.1329 17.2496C19.7344 16.5661 20.1667 15.8659 20.4614 15.0877C20.8175 14.1475 20.9505 13.1515 20.9942 12.0392ZM11.9846 13C12.5366 13 12.9842 12.5523 12.9842 12C12.9842 11.4477 12.5366 11 11.9846 11C11.4325 11 10.9849 11.4477 10.9849 12C10.9849 12.5523 11.4325 13 11.9846 13ZM15.9831 12C15.9831 12.5523 15.5356 13 14.9835 13C14.4314 13 13.9838 12.5523 13.9838 12C13.9838 11.4477 14.4314 11 14.9835 11C15.5356 11 15.9831 11.4477 15.9831 12ZM8.98565 13C9.53774 13 9.98529 12.5523 9.98529 12C9.98529 11.4477 9.53774 11 8.98565 11C8.43357 11 7.98602 11.4477 7.98602 12C7.98602 12.5523 8.43357 13 8.98565 13Z",
};

function HomeIcon({ active }: { active: boolean }) {
    return (
        <div className="relative shrink-0 size-[24px]">
            <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 24 24">
                <g>
                    <g>
                        <path clipRule="evenodd" d={svgPaths.p302f5f0} fill={active ? "#20A4B0" : "#959DAC"} fillRule="evenodd" />
                        <path clipRule="evenodd" d={svgPaths.p11148400} fill={active ? "#20A4B0" : "#959DAC"} fillRule="evenodd" />
                        <path clipRule="evenodd" d={svgPaths.pee5f600} fill={active ? "#20A4B0" : "#959DAC"} fillRule="evenodd" />
                    </g>
                </g>
            </svg>
        </div>
    );
}

function LearningIcon({ active }: { active: boolean }) {
    return (
        <div className="relative shrink-0 size-[24px]">
            <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 24 24">
                <g>
                    <g>
                        <path d={svgPaths.p2991c3f0} fill={active ? "#20A4B0" : "#959DAC"} />
                        <path d={svgPaths.p2a329280} fill={active ? "#20A4B0" : "#959DAC"} />
                        <path d={svgPaths.p33138980} fill={active ? "#20A4B0" : "#959DAC"} />
                        <path clipRule="evenodd" d={svgPaths.p3b13c200} fill={active ? "#20A4B0" : "#959DAC"} fillRule="evenodd" />
                    </g>
                </g>
            </svg>
        </div>
    );
}

function ChatIcon({ active }: { active: boolean }) {
    return (
        <div className="relative shrink-0 size-[24px]">
            <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 24 24">
                <g>
                    <path clipRule="evenodd" d={svgPaths.p30eb000} fill={active ? "#20A4B0" : "#959DAC"} fillRule="evenodd" />
                </g>
            </svg>
        </div>
    );
}

export default function BottomNavigation() {
    const pathname = usePathname();

    const isHome = pathname === "/";
    const isLearning = pathname.startsWith("/learning");
    const isChat = pathname.startsWith("/chat");

    // Don't show navigation on full-screen pages
    const hiddenPaths = ["/payment", "/my-child", "/reward", "/auth"];
    const shouldHide = hiddenPaths.some(path => pathname.startsWith(path));

    if (shouldHide) return null;

    return (
        <div className="bg-white shrink-0 flex items-center justify-around px-[12px] py-[8px] w-full z-50 border-t border-slate-100">
            <Link
                href="/"
                className="flex flex-1 flex-col gap-[4px] items-center justify-center"
            >
                <HomeIcon active={isHome} />
                <p
                    className={`font-['Inter'] leading-[18px] text-[12px] ${isHome ? "font-semibold text-[#13939e]" : "font-normal text-[#959dac]"
                        }`}
                >
                    Home
                </p>
            </Link>

            <Link
                href="/learning"
                className="flex flex-1 flex-col gap-[4px] items-center justify-center"
            >
                <LearningIcon active={isLearning} />
                <p
                    className={`font-['Inter'] leading-[18px] text-[12px] ${isLearning ? "font-semibold text-[#13939e]" : "font-normal text-[#959dac]"
                        }`}
                >
                    Learning
                </p>
            </Link>

            <Link
                href="/chat"
                className="flex flex-1 flex-col gap-[4px] items-center justify-center"
            >
                <ChatIcon active={isChat} />
                <p
                    className={`font-['Inter'] leading-[18px] text-[12px] ${isChat ? "font-semibold text-[#13939e]" : "font-normal text-[#959dac]"
                        }`}
                >
                    Chat
                </p>
            </Link>
        </div>
    );
}
